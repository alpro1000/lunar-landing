<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>Lunar Dream Calendar ‚Äî –õ—É–Ω–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å —Å–Ω–æ–≤</title>
  <meta name="description" content="–õ—É–Ω–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å —Å–Ω–æ–≤: –¥–∞—Ç–∞ ‚Üí –ª—É–Ω–Ω—ã–µ —Å—É—Ç–∫–∏ ‚Üí —Ç–∏–ø ‚Üí –∑–∞–º–µ—Ç–∫–∏ (–æ—Ü–µ–Ω–æ—á–Ω–æ). –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ, —Å –≤—ã–±–æ—Ä–æ–º —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞."/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Noto+Sans:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#064f43;              /* –±–∞–∑–æ–≤—ã–π —Ñ–æ–Ω ‚Äî –∫–∞–∫ –ø—Ä–æ—Å–∏–ª–∏ */
      --panel:#12151b;
      --ink:#ECEFF4;
      --muted:#A7B0BC;
      --border:#1E232B;
      --gold:#C8A75A;
      --aqua:#87C5C9;

      --radius:14px; --shadow:0 10px 28px rgba(0,0,0,.45);
      --fs:18px; --lh:1.7;
      --font:"Inter","Noto Sans",system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans",sans-serif;
      --mono:ui-monospace,"SFMono-Regular",Menlo,Consolas,monospace;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      /* —Ñ–æ–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤–∞—à–µ–≥–æ —Ü–≤–µ—Ç–∞ */
      background:
        radial-gradient(1200px 700px at 20% -10%, var(--bg) 0%, #0b1a17 60%),
        linear-gradient(180deg, rgba(0,0,0,.25), rgba(0,0,0,.25)) fixed;
      color:var(--ink); font:var(--fs)/var(--lh) var(--font);
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    .wrap{max-width:960px;margin:0 auto;padding:16px}
    header{position:sticky;top:0;z-index:10;background:rgba(8,12,12,.75);backdrop-filter:blur(10px);border-bottom:1px solid var(--border)}
    header .wrap{display:flex;align-items:center;gap:12px;flex-wrap:wrap}
    .brand{display:flex;align-items:center;gap:10px;color:var(--ink);text-decoration:none;white-space:nowrap}
    .moonIco{font-size:24px;line-height:1;filter:drop-shadow(0 2px 6px rgba(0,0,0,.4))}
    .brand span{font-weight:700;letter-spacing:.2px}

    .navlink.btn{background:transparent;color:var(--gold);border:1px solid var(--gold);border-radius:10px;padding:8px 12px;font-size:16px;text-decoration:none}
    .navlink.btn:hover{background:rgba(200,167,90,.12)}
    .controls{margin-left:auto;display:flex;gap:8px;flex-wrap:wrap;align-items:center}
    .select,.btn{background:#0f1217;color:var(--ink);border:1px solid var(--border);border-radius:10px;padding:8px 12px;font-size:16px}
    .btn{cursor:pointer}
    .btn.today{background:linear-gradient(135deg,var(--aqua),#5aa6ab);color:#071014;border:0;font-weight:700}
    .btn:focus-visible,.select:focus-visible,.navlink.btn:focus-visible{outline:2px solid var(--aqua);outline-offset:2px}

    main .card{
      background:linear-gradient(180deg,rgba(25,29,36,.85),rgba(18,21,27,.95));
      border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow);
      padding:16px; margin:16px 0;
    }
    h1{font-size:26px;line-height:1.3;margin:0 0 6px 0}
    h2{font-size:18px;margin:0 0 6px 0;color:var(--muted)}
    .gold{color:var(--gold)} .muted{color:var(--muted)}
    .row{display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin:10px 0}

    .table-wrap{border:1px solid var(--border);border-radius:12px;overflow:hidden}
    .scroll{overflow:auto}
    table{width:100%;border-collapse:collapse;min-width:680px}
    thead th{
      position:sticky;top:0;z-index:1;background:#10141a;color:var(--ink);
      text-align:left;padding:10px;border-bottom:1px solid var(--border);font-weight:700
    }
    tbody td{padding:10px;border-bottom:1px solid var(--border);vertical-align:top}
    tbody tr:nth-child(even){background:#102017}
    .dateCell{white-space:nowrap;font-size:16px}
    .dayCell{font-variant-numeric:tabular-nums;font-family:var(--mono);text-align:center}
    .typeCell,.notesCell{font-size:16px}

    /* –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–π —Å—Ç—Ä–æ–∫–∏ ‚Äî –≤—Å—è —Å—Ç—Ä–æ–∫–∞, –±–µ–∑ —Å–º–µ—â–µ–Ω–∏—è */
    .scroll table tbody tr.today{
      background:
        radial-gradient(120% 180% at 15% 50%, rgba(200,167,90,0.16) 0%, rgba(200,167,90,0.08) 40%, rgba(0,0,0,0) 80%),
        linear-gradient(0deg, rgba(255,255,255,0.02), rgba(255,255,255,0.02)) !important;
      box-shadow: inset 0 0 0 2px var(--gold);
    }

    footer{opacity:.9;border-top:1px solid var(--border);padding:14px 0;margin:12px 0}
    .footnote{font-size:14px}
    @media (max-width:760px){
      h1{font-size:22px}
      .select,.btn,.navlink.btn{font-size:15px}
      table{min-width:620px}
      .moonIco{font-size:22px}
    }
  </style>
</head>
<body>
<header>
  <div class="wrap">
    <a class="brand" href="#" aria-label="Home">
      <span id="moonIcon" class="moonIco" role="img" aria-label="Moon">üåó</span>
      <span id="brandName">Lunar Dream Calendar</span>
    </a>
    <!-- –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Å–æ–Ω–Ω–∏–∫—É (–ª–æ–∫–∞–ª–∏–∑—É–µ—Ç—Å—è) -->
    <a href="#dreambook" id="navDreambook" class="navlink btn">–°–æ–Ω–Ω–∏–∫</a>

    <div class="controls">
      <select id="lang" class="select" aria-label="Language"></select>
      <select id="tz" class="select" aria-label="Time zone"></select>
      <button id="prev" class="btn" aria-label="Previous month">‚Üê</button>
      <div id="monthLabel" class="muted" style="min-width:200px;font-weight:700"></div>
      <button id="next" class="btn" aria-label="Next month">‚Üí</button>
      <button id="today" class="btn today" aria-label="–°–µ–≥–æ–¥–Ω—è">–°–µ–≥–æ–¥–Ω—è</button>
    </div>
  </div>
</header>

<main class="wrap">
  <section class="card" id="calendarCard">
    <h1 id="title" class="gold">–õ—É–Ω–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å —Å–Ω–æ–≤</h1>
    <h2 id="subtitle" class="muted">–¢–∞–±–ª–∏—Ü–∞: –¥–∞—Ç–∞ ‚Üí –ª—É–Ω–Ω—ã–µ —Å—É—Ç–∫–∏ ‚Üí —Ç–∏–ø —Å–Ω–æ–≤ ‚Üí –∑–∞–º–µ—Ç–∫–∏ (–æ—Ü–µ–Ω–æ—á–Ω–æ).</h2>

    <div class="row">
      <span id="tzLabel" class="muted">–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å:</span>
      <code id="tzActive" style="color:var(--gold)"></code>
      <span class="muted" style="margin-left:auto" id="legend">–í—ã–¥–µ–ª–µ–Ω–æ ‚Äî —Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞</span>
    </div>

    <div class="table-wrap">
      <div class="scroll">
        <table aria-label="Lunar dream table">
          <thead>
            <tr>
              <th id="thDate">–î–∞—Ç–∞</th>
              <th id="thDay">–õ—É–Ω–Ω—ã–µ —Å—É—Ç–∫–∏</th>
              <th id="thType">–¢–∏–ø —Å–Ω–æ–≤</th>
              <th id="thNotes">–ö—Ä–∞—Ç–∫–∏–µ –ø–æ–º–µ—Ç–∫–∏</th>
            </tr>
          </thead>
          <tbody id="tbody"></tbody>
        </table>
      </div>
    </div>

    <p id="sources" class="muted footnote" style="margin-top:10px">
      –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –≤–æ–∑—Ä–∞—Å—Ç –õ—É–Ω—ã —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏–±–ª–∏–∂—ë–Ω–Ω–æ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —á–∞—Å–æ–≤–æ–º—É –ø–æ—è—Å—É; —Ç–∏–ø—ã/–∑–∞–º–µ—Ç–∫–∏ ‚Äî –ø–æ –∑–∞–¥–∞–Ω–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ (–æ—Ü–µ–Ω–æ—á–Ω–æ).
    </p>
  </section>

  <!-- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–æ–Ω–Ω–∏–∫ (–ø–æ –¥–∞–Ω–Ω—ã–º –∏–∑ data/dreams_curated.json) -->
  <section class="card" id="dreambook" style="padding-top:8px;">
    <h2 class="gold" id="dbTitle" style="margin-top:0">–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–æ–Ω–Ω–∏–∫</h2>
    <input id="dreamSearch" type="search"
           placeholder="–ù–∞–π–¥–∏—Ç–µ —Å–∏–º–≤–æ–ª‚Ä¶ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–æ–¥–∞, –ø–æ–ª—ë—Ç)"
           style="width:100%; padding:12px; border-radius:10px; border:1px solid #444; margin:12px 0;">
    <div id="dreamCount" class="muted" style="margin-bottom:8px;"></div>
    <div class="table-wrap" style="overflow:auto; border:1px solid #333; border-radius:12px;">
      <table id="dreamTable" style="width:100%; border-collapse:collapse; min-width:680px;">
        <thead>
          <tr>
            <th id="dbThSymbol" style="text-align:left; padding:10px; border-bottom:1px solid #333;">–°–∏–º–≤–æ–ª</th>
            <th id="dbThSummary" style="text-align:left; padding:10px; border-bottom:1px solid #333;">–ö—Ä–∞—Ç–∫–æ</th>
            <th id="dbThConf" style="text-align:left; padding:10px; border-bottom:1px solid #333;">–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </section>

  <footer>
    <p id="footerText">¬© <span id="year"></span> ‚Ä¢ –í—Å–µ —Ç–æ–ª–∫–æ–≤–∞–Ω–∏—è ‚Äî –æ—Ü–µ–Ω–æ—á–Ω–æ; –Ω–µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π —Å–æ–≤–µ—Ç.</p>
  </footer>
</main>

<!-- === –°–∫—Ä–∏–ø—Ç 1: –∫–∞–ª–µ–Ω–¥–∞—Ä—å –ª—É–Ω–Ω—ã—Ö —Å–Ω–æ–≤ === -->
<script>
/* ================= I18N ================= */
const I18N = {
  ru:{
    brand:"–õ—É–Ω–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å —Å–Ω–æ–≤",
    navDreambook:"–°–æ–Ω–Ω–∏–∫",
    title:"–õ—É–Ω–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å —Å–Ω–æ–≤",
    subtitle:"–¢–∞–±–ª–∏—Ü–∞: –¥–∞—Ç–∞ ‚Üí –ª—É–Ω–Ω—ã–µ —Å—É—Ç–∫–∏ ‚Üí —Ç–∏–ø —Å–Ω–æ–≤ ‚Üí –∑–∞–º–µ—Ç–∫–∏ (–æ—Ü–µ–Ω–æ—á–Ω–æ).",
    thDate:"–î–∞—Ç–∞", thDay:"–õ—É–Ω–Ω—ã–µ —Å—É—Ç–∫–∏", thType:"–¢–∏–ø —Å–Ω–æ–≤", thNotes:"–ö—Ä–∞—Ç–∫–∏–µ –ø–æ–º–µ—Ç–∫–∏",
    tzLabel:"–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å:", legend:"–í—ã–¥–µ–ª–µ–Ω–æ ‚Äî —Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞",
    sources:"–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –≤–æ–∑—Ä–∞—Å—Ç –õ—É–Ω—ã —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏–±–ª–∏–∂—ë–Ω–Ω–æ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —á–∞—Å–æ–≤–æ–º—É –ø–æ—è—Å—É; —Ç–∏–ø—ã/–∑–∞–º–µ—Ç–∫–∏ ‚Äî –ø–æ –∑–∞–¥–∞–Ω–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ (–æ—Ü–µ–Ω–æ—á–Ω–æ).",
    footer:"¬© {year} ‚Ä¢ –í—Å–µ —Ç–æ–ª–∫–æ–≤–∞–Ω–∏—è ‚Äî –æ—Ü–µ–Ω–æ—á–Ω–æ; –Ω–µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π —Å–æ–≤–µ—Ç.",
    today:"–°–µ–≥–æ–¥–Ω—è",
    dbTitle:"–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–æ–Ω–Ω–∏–∫",
    dbSymbol:"–°–∏–º–≤–æ–ª", dbSummary:"–ö—Ä–∞—Ç–∫–æ", dbConfidence:"–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å",
    dbSearchPlaceholder:"–ù–∞–π–¥–∏—Ç–µ —Å–∏–º–≤–æ–ª‚Ä¶ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–æ–¥–∞, –ø–æ–ª—ë—Ç)",
    dbFound:"–ù–∞–π–¥–µ–Ω–æ: {n} —Å–∏–º–≤–æ–ª–æ–≤", dbNoData:"–î–∞–Ω–Ω—ã–µ —Å–æ–Ω–Ω–∏–∫–∞ –ø–æ–∫–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã."
  },
  en:{
    brand:"Lunar Dream Calendar",
    navDreambook:"Dreambook",
    title:"Lunar Dream Calendar",
    subtitle:"Table: date ‚Üí lunar day ‚Üí dream type ‚Üí notes (indicative).",
    thDate:"Date", thDay:"Lunar day", thType:"Dream type", thNotes:"Notes",
    tzLabel:"Time zone:", legend:"Highlighted ‚Äî today",
    sources:"Note: Moon age is approximated for the selected time zone; dream types/notes come from the provided table.",
    footer:"¬© {year} ‚Ä¢ All interpretations are indicative; not medical advice.",
    today:"Today",
    dbTitle:"Modern Dreambook",
    dbSymbol:"Symbol", dbSummary:"Summary", dbConfidence:"Confidence",
    dbSearchPlaceholder:"Search a symbol‚Ä¶ (e.g., water, flying)",
    dbFound:"Found: {n} symbols", dbNoData:"Dreambook data not loaded yet."
  },
  de:{
    brand:"Mondkalender der Tr√§ume",
    navDreambook:"Traumlexikon",
    title:"Mondkalender der Tr√§ume",
    subtitle:"Tabelle: Datum ‚Üí Mondtag ‚Üí Traumtyp ‚Üí Notizen (indikativ).",
    thDate:"Datum", thDay:"Mondtag", thType:"Traumtyp", thNotes:"Notizen",
    tzLabel:"Zeitzone:", legend:"Hervorgehoben ‚Äî heute",
    sources:"Hinweis: Mondalter wird n√§herungsweise f√ºr die gew√§hlte Zeitzone berechnet; Typen/Notizen aus der bereitgestellten Tabelle.",
    footer:"¬© {year} ‚Ä¢ Alle Deutungen sind indikativ; keine medizinische Auskunft.",
    today:"Heute",
    dbTitle:"Modernes Traumlexikon",
    dbSymbol:"Symbol", dbSummary:"Kurz", dbConfidence:"Sicherheit",
    dbSearchPlaceholder:"Symbol suchen‚Ä¶ (z. B. Wasser, Fliegen)",
    dbFound:"Gefunden: {n} Symbole", dbNoData:"Daten des Traumlexikons noch nicht geladen."
  },
  es:{
    brand:"Calendario lunar de sue√±os",
    navDreambook:"Diccionario de sue√±os",
    title:"Calendario lunar de sue√±os",
    subtitle:"Tabla: fecha ‚Üí d√≠a lunar ‚Üí tipo de sue√±o ‚Üí notas (indicativo).",
    thDate:"Fecha", thDay:"D√≠a lunar", thType:"Tipo de sue√±o", thNotes:"Notas",
    tzLabel:"Huso horario:", legend:"Resaltado ‚Äî hoy",
    sources:"Notas: la edad lunar se estima seg√∫n el huso; tipos/notas de la tabla proporcionada.",
    footer:"¬© {year} ‚Ä¢ Todas las interpretaciones son indicativas; no constituyen consejo m√©dico.",
    today:"Hoy",
    dbTitle:"Diccionario moderno de sue√±os",
    dbSymbol:"S√≠mbolo", dbSummary:"Resumen", dbConfidence:"Confianza",
    dbSearchPlaceholder:"Busca un s√≠mbolo‚Ä¶ (p. ej., agua, volar)",
    dbFound:"Encontrados: {n} s√≠mbolos", dbNoData:"Datos del diccionario a√∫n no cargados."
  },
  it:{
    brand:"Calendario lunare dei sogni",
    navDreambook:"Dizionario dei sogni",
    title:"Calendario lunare dei sogni",
    subtitle:"Tabella: data ‚Üí giorno lunare ‚Üí tipo di sogno ‚Üí note (indicativo).",
    thDate:"Data", thDay:"Giorno lunare", thType:"Tipo di sogno", thNotes:"Note",
    tzLabel:"Fuso orario:", legend:"Evidenziato ‚Äî oggi",
    sources:"Nota: l'et√† della Luna √® stimata per il fuso selezionato; tipi/note dalla tabella fornita.",
    footer:"¬© {year} ‚Ä¢ Tutte le interpretazioni sono indicative; non sono un consiglio medico.",
    today:"Oggi",
    dbTitle:"Dizionario moderno dei sogni",
    dbSymbol:"Simbolo", dbSummary:"Sintesi", dbConfidence:"Fiducia",
    dbSearchPlaceholder:"Cerca un simbolo‚Ä¶ (es. acqua, volo)",
    dbFound:"Trovati: {n} simboli", dbNoData:"Dati del dizionario non ancora caricati."
  },
  uk:{
    brand:"–ú—ñ—Å—è—á–Ω–∏–π –∫–∞–ª–µ–Ω–¥–∞—Ä —Å–Ω—ñ–≤",
    navDreambook:"–°–æ–Ω–Ω–∏–∫",
    title:"–ú—ñ—Å—è—á–Ω–∏–π –∫–∞–ª–µ–Ω–¥–∞—Ä —Å–Ω—ñ–≤",
    subtitle:"–¢–∞–±–ª–∏—Ü—è: –¥–∞—Ç–∞ ‚Üí –º—ñ—Å—è—á–Ω–∞ –¥–æ–±–∞ ‚Üí —Ç–∏–ø —Å–Ω—É ‚Üí –Ω–æ—Ç–∞—Ç–∫–∏ (–æ—Ä—ñ—î–Ω—Ç–æ–≤–Ω–æ).",
    thDate:"–î–∞—Ç–∞", thDay:"–ú—ñ—Å—è—á–Ω–∞ –¥–æ–±–∞", thType:"–¢–∏–ø —Å–Ω—É", thNotes:"–ù–æ—Ç–∞—Ç–∫–∏",
    tzLabel:"–ß–∞—Å–æ–≤–∏–π –ø–æ—è—Å:", legend:"–ü—ñ–¥—Å–≤—ñ—á–µ–Ω–æ ‚Äî —Å—å–æ–≥–æ–¥–Ω—ñ",
    sources:"–ü—Ä–∏–º—ñ—Ç–∫–∞: –≤—ñ–∫ –ú—ñ—Å—è—Ü—è –æ–±—á–∏—Å–ª—é—î—Ç—å—Å—è –Ω–∞–±–ª–∏–∂–µ–Ω–æ –¥–ª—è –æ–±—Ä–∞–Ω–æ–≥–æ –ø–æ—è—Å—É; —Ç–∏–ø–∏/–Ω–æ—Ç–∞—Ç–∫–∏ ‚Äî —ñ–∑ –Ω–∞–¥–∞–Ω–æ—ó —Ç–∞–±–ª–∏—Ü—ñ.",
    footer:"¬© {year} ‚Ä¢ –£—Å—ñ —Ç–ª—É–º–∞—á–µ–Ω–Ω—è –æ—Ä—ñ—î–Ω—Ç–æ–≤–Ω—ñ; –Ω–µ —î –º–µ–¥–∏—á–Ω–æ—é –ø–æ—Ä–∞–¥–æ—é.",
    today:"–°—å–æ–≥–æ–¥–Ω—ñ",
    dbTitle:"–°—É—á–∞—Å–Ω–∏–π —Å–æ–Ω–Ω–∏–∫",
    dbSymbol:"–°–∏–º–≤–æ–ª", dbSummary:"–°—Ç–∏—Å–ª–æ", dbConfidence:"–í–ø–µ–≤–Ω–µ–Ω—ñ—Å—Ç—å",
    dbSearchPlaceholder:"–ó–Ω–∞–π–¥—ñ—Ç—å —Å–∏–º–≤–æ–ª‚Ä¶ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –≤–æ–¥–∞, –ø–æ–ª—ñ—Ç)",
    dbFound:"–ó–Ω–∞–π–¥–µ–Ω–æ: {n} —Å–∏–º–≤–æ–ª—ñ–≤", dbNoData:"–î–∞–Ω—ñ —Å–æ–Ω–Ω–∏–∫–∞ —â–µ –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ."
  },
  fr:{
    brand:"Calendrier lunaire des r√™ves",
    navDreambook:"Dictionnaire des r√™ves",
    title:"Calendrier lunaire des r√™ves",
    subtitle:"Tableau : date ‚Üí jour lunaire ‚Üí type de r√™ve ‚Üí notes (indicatif).",
    thDate:"Date", thDay:"Jour lunaire", thType:"Type de r√™ve", thNotes:"Notes",
    tzLabel:"Fuseau horaire :", legend:"Surlign√© ‚Äî aujourd‚Äôhui",
    sources:"Remarque : l‚Äô√¢ge de la Lune est estim√© pour le fuseau choisi ; types/notes issus du tableau fourni.",
    footer:"¬© {year} ‚Ä¢ Toutes les interpr√©tations sont indicatives ; pas un avis m√©dical.",
    today:"Aujourd‚Äôhui",
    dbTitle:"Dictionnaire moderne des r√™ves",
    dbSymbol:"Symbole", dbSummary:"R√©sum√©", dbConfidence:"Confiance",
    dbSearchPlaceholder:"Recherchez un symbole‚Ä¶ (ex. eau, vol)",
    dbFound:"Trouv√©s : {n} symboles", dbNoData:"Donn√©es du dictionnaire non encore charg√©es."
  }
};

/* ============= –¢–∞–±–ª–∏—Ü—ã day,type,notes (–ø–æ–ª–Ω—ã–µ; 1..30) ============= */
const TABLE_RU=[null,
  {type:"–±–µ–∑ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏",notes:"–õ—É—á—à–µ–µ –≤—Ä–µ–º—è —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–º–µ—Ä–µ–Ω–∏—è; –µ—Å–ª–∏ —Å–Ω–∏—Ç—Å—è ‚Äî —Ç—Ä–∞–∫—Ç—É–π—Ç–µ –∫–∞–∫ –æ—Ä–∏–µ–Ω—Ç–∏—Ä, –Ω–µ –∫–∞–∫ –ø—Ä–æ–≥–Ω–æ–∑."},
  {type:"–±–µ–∑ –æ—Ç–¥–µ–ª—å–Ω–æ–π –º–µ—Ç–∫–∏",notes:"–î–µ–Ω—å –ø—Ä–æ —â–µ–¥—Ä–æ—Å—Ç—å –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ; —Å–ø–µ—Ü. –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å–Ω–æ–≤ –Ω–µ—Ç."},
  {type:"–ø—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–µ; —Å–∫–ª–æ–Ω–Ω—ã–µ –∫ –≤–æ–ø–ª–æ—â–µ–Ω–∏—é",notes:"–ü—Ä–µ–æ–¥–æ–ª–µ–Ω–∏–µ –≤–æ —Å–Ω–µ ‚Üí –≤ –∂–∏–∑–Ω–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞/—à–∞–Ω—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏."},
  {type:"–ø—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–≥–∞—é—â–∏–µ; —Ä–æ–¥–æ–≤—ã–µ",notes:"–¢–µ–º—ã —Å–µ–º—å–∏/–ø—Ä–µ–¥–∫–æ–≤; —Ç—Ä–µ–±–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –∫ –≤–Ω–∏–º–∞–Ω–∏—é —Å–Ω—ã."},
  {type:"–Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ-–ø–æ–∑–∏—Ç–∏–≤–Ω—ã–µ",notes:"–ë–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω—ã–π —Ñ–æ–Ω; —Å—Ç—Ä–æ–≥–∏—Ö –ø—Ä–∞–≤–∏–ª –Ω–µ—Ç."},
  {type:"–ø—Ä–µ–¥–≤–æ—Å—Ö–∏—â–∞—é—â–∏–µ; –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–µ",notes:"–•–æ—Ä–æ—à–æ –ª–æ–≤—è—Ç—Å—è –ª–∏–Ω–∏–∏ –±—É–¥—É—â–µ–≥–æ; —É–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ–º–æ–≥–∞–µ—Ç."},
  {type:"–≤—ã—Å–æ–∫–æ–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ",notes:"–ß–∞—Å—Ç–æ —Å–±—ã–≤–∞—é—Ç—Å—è; —Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –¥–µ—Ç–∞–ª–∏."},
  {type:"–ø—Ä–æ—Ä–æ—á–µ—Å–∫–∏–µ –ø—Ä–æ –ø—Ä–∏–∑–≤–∞–Ω–∏–µ",notes:"–ù–∞–º—ë–∫–∏ –Ω–∞ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ, –¥–æ–ª–≥–∏–π –∫—É—Ä—Å."},
  {type:"–±–µ–∑ —è–≤–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏",notes:"–î–µ–Ω—å –Ω–∞–ø—Ä—è–∂—ë–Ω–Ω—ã–π; —Å–ø–µ—Ü. –ø—Ä–∞–≤–∏–ª –ø–æ —Å–Ω–∞–º –Ω–µ—Ç."},
  {type:"–≤ –æ—Å–Ω–æ–≤–Ω–æ–º ¬´–ø—É—Å—Ç—ã–µ¬ª",notes:"–ë–µ–∑ —Å–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∏–∑–∫–∞—è; —Å –∞–∫—Ü–µ–Ω—Ç–∞–º–∏ ‚Äî —Ä–æ–¥/—Å–µ–º—å—è."},
  {type:"–º–∞—Ä–∫–µ—Ä –Ω–∞ –∑–∞–≤—Ç—Ä–∞—à–Ω–∏–µ ¬´–≤–µ—â–∏–µ¬ª",notes:"–°–∏–≥–Ω–∞–ª, —á—Ç–æ 12-–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–Ω–∞—á–∏–º—ã–º."},
  {type:"—Å–≤–µ—Ç–ª—ã–µ –∏ —Å–±—ã–≤–∞—é—â–∏–µ—Å—è",notes:"–ß–∏—Å—Ç—ã–µ, –¥–æ–±—Ä–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–Ω—ã."},
  {type:"–∏–Ω—Å–∞–π—Ç—ã –∏ —É–∫–∞–∑–∞—Ç–µ–ª–∏",notes:"–û–∑–∞—Ä–µ–Ω–∏—è; –∏–º–ø—É–ª—å—Å —Ç—è–Ω–µ—Ç—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é –Ω–æ—á—å."},
  {type:"—ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä—è–¥–∫–∞",notes:"–ù–µ–ø—Ä–∏—è—Ç–Ω—ã–µ —Å—é–∂–µ—Ç—ã –∫–∞–∫ –≤—ã–ø—É—Å–∫ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è."},
  {type:"–±–µ–∑ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏",notes:"–î–µ–Ω—å —Å –ø—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏—è–º–∏; —Ç–∏–ø —Å–Ω–æ–≤ –Ω–µ –∑–∞–¥–∞–Ω."},
  {type:"–æ—á–∏—Å—Ç–∏—Ç–µ–ª—å–Ω—ã–µ",notes:"–°–Ω–∏–º–∞—é—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ."},
  {type:"–Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ-—Ä–∞–±–æ—á–∏–µ",notes:"–ë–µ–∑ —Å–ø–µ—Ü. –æ–∂–∏–¥–∞–Ω–∏–π –ø–æ —Å–Ω–∞–º."},
  {type:"—ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–µ (–Ω–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç–µ–ª—å–Ω—ã–µ)",notes:"–î–ª—è –ø—Ä–∞–∫—Ç–∏–∫ —Å–∏–ª—ã/—Å–≤–µ—Ç–∞."},
  {type:"–ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ –Ω–µ–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ",notes:"–ú–æ–∂–Ω–æ –Ω–µ –∑–∞–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è –Ω–∞ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–µ."},
  {type:"–±–µ–∑ –æ—Ç–¥–µ–ª—å–Ω–æ–π –º–µ—Ç–∫–∏",notes:"–§–æ–∫—É—Å –Ω–∞ –≤–æ–ª–µ; —Ç–∏–ø –Ω–µ –∑–∞–¥–∞–Ω."},
  {type:"–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ–ª—å–Ω—ã–µ (–Ω–∞ —Å–ª–µ–¥—É—é—â—É—é –Ω–æ—á—å)",notes:"–ù–æ—á—å—é –¥–∞–ª–µ–µ ‚Äî –∏—Å—Ü–µ–ª–µ–Ω–∏–µ –±–µ–∑ –Ω–æ–≤–æ–π –∏–Ω—Ñ—ã."},
  {type:"–ø–æ–∑–Ω–∞–≤–∞—Ç–µ–ª—å–Ω—ã–µ; –æ–±—É—á–∞—é—â–∏–µ",notes:"–ü—Ä–∏–Ω–æ—Å—è—Ç –∑–Ω–∞–Ω–∏—è –∏ —Ä–∞–±–æ—á–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏."},
  {type:"–∏–Ω–≤–µ—Ä—Å–∏–æ–Ω–Ω—ã–µ (¬´–Ω–∞–æ–±–æ—Ä–æ—Ç¬ª)",notes:"–¢—Ä–∞–∫—Ç–æ–≤–∫–∞ ¬´–Ω–∞–æ–±–æ—Ä–æ—Ç¬ª (—É—á–∏—Ç—ã–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç)."},
  {type:"–¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ",notes:"–û—Ç—Ä–∞–∂–∞—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–µ–ª–∞/—Å–µ–∫—Å—É–∞–ª—å–Ω–æ—Å—Ç–∏."},
  {type:"—Ç–∏—à–∏–Ω–∞ / –º–∏–Ω–∏–º—É–º —Å–∏–≥–Ω–∞–ª–æ–≤",notes:"–ß–∞—â–µ –ø–∞—É–∑–∞ –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è."},
  {type:"–ø—Ä–æ —Å–∞–º–æ–æ—Ü–µ–Ω–∫—É",notes:"–ó–µ—Ä–∫–∞–ª—è—Ç —Å–∞–º–æ–æ—Ü–µ–Ω–∫—É –∏ –∑–∞–±–æ—Ç—É –æ —Å–µ–±–µ."},
  {type:"–∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ-–ø—Ä–æ—Ä–æ—á–µ—Å–∫–∏–µ (–¥–≤–µ –Ω–æ—á–∏)",notes:"–û–∑–∞—Ä–µ–Ω–∏—è —Å–µ–≥–æ–¥–Ω—è –∏ –∑–∞–≤—Ç—Ä–∞."},
  {type:"—É—Ä–∞–≤–Ω–æ–≤–µ—à–µ–Ω–Ω—ã–µ",notes:"–ì–∞—Ä–º–æ–Ω–∏—á–Ω—ã–π —Ñ–æ–Ω; –±–µ–∑ –∂—ë—Å—Ç–∫–æ–π –º–µ—Ç–∫–∏."},
  {type:"–ø–æ–≥—Ä–∞–Ω–∏—á–Ω—ã–µ; ¬´—Ä–∏—Ç—É–∞–ª—å–Ω—ã–µ¬ª",notes:"–ü–µ—Ä–µ—Ö–æ–¥–Ω—ã–µ —Å—é–∂–µ—Ç—ã; –æ—Ç–¥–µ–ª—å–Ω–æ–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–µ—Ç."},
  {type:"–∏—Ç–æ–≥–æ–≤—ã–µ –ø—Ä–æ—Ä–æ—á–µ—Å–∫–∏–µ",notes:"–ú–Ω–æ–≥–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏; –ø–æ–¥—Å–≤–µ—á–∏–≤–∞—é—Ç –æ—à–∏–±–∫–∏ –∏ —Ä–æ—Å—Ç."}
];
const TABLE_EN=[null,
  {type:"no fixed category",notes:"Best time to set intentions and plans; treat any dream as a compass, not a forecast."},
  {type:"no separate label",notes:"A day of generosity/planning; no specific dream category."},
  {type:"testing; likely to materialize",notes:"Overcoming hurdles in a dream ‚Üí life will test you; scenario is actionable."},
  {type:"cautionary; ancestral",notes:"Family/ancestors themes; dreams warn of risks and require attentiveness."},
  {type:"neutral-positive",notes:"Favorable backdrop; no strict rules."},
  {type:"anticipatory; intuitive",notes:"Future lines are easier to grasp; solitude sharpens clarity."},
  {type:"highly informative",notes:"Often come true; capture details."},
  {type:"prophetic about vocation",notes:"Hints at calling and long-term direction."},
  {type:"no clear category",notes:"Tense day; no special dream rules."},
  {type:"mostly ‚Äúempty‚Äù",notes:"Without strong markers there‚Äôs little meaning; with accents ‚Äî family/lineage themes."},
  {type:"marker for tomorrow‚Äôs ‚Äòprophetic‚Äô",notes:"Signal that the 12th may be significant."},
  {type:"bright and fulfilled",notes:"Quiet, clear dreams, often confirmed."},
  {type:"insights and pointers",notes:"Epiphanies; momentum continues into the next night."},
  {type:"emotional discharge",notes:"Unpleasant plots release tension rather than predict events."},
  {type:"no fixed category",notes:"Warnings in the day; no specific dream type."},
  {type:"cleansing",notes:"Helps release inner strain."},
  {type:"neutral, worklike",notes:"No special expectations."},
  {type:"energetic (not predictive)",notes:"Good for power/light practice."},
  {type:"mostly non-informative",notes:"You can skip decoding."},
  {type:"no separate label",notes:"Resolve and will; no set dream type."},
  {type:"restorative (next night)",notes:"Next night brings little info but supports recharge/healing."},
  {type:"knowledge-bearing; instructive",notes:"Brings know-how and practical hints."},
  {type:"inverted (‚Äòopposite‚Äô)",notes:"Interpret in reverse (consider context)."},
  {type:"diagnostic",notes:"Reflects state of body/sexual energy."},
  {type:"quiet / minimal signals",notes:"Often a pause and sensory rest."},
  {type:"about self-esteem",notes:"Highlights self-worth, boundaries, self-care."},
  {type:"intuitive-prophetic (two nights)",notes:"Insights today and tomorrow."},
  {type:"balanced",notes:"Harmonious background; no rigid label."},
  {type:"liminal; ‚Äòritual‚Äô",notes:"Transitional motifs; no separate classification."},
  {type:"final prophetic",notes:"Rich in information; show mistakes and growth points."}
];
const TABLE_DE=[null,
  {type:"keine feste Kategorie",notes:"Beste Zeit f√ºr Intentionen/Pl√§ne; Tr√§ume als Kompass, nicht als Vorhersage."},
  {type:"ohne eigene Kennzeichnung",notes:"Tag der Gro√üz√ºgigkeit/Planung; keine spezielle Traumkategorie."},
  {type:"pr√ºfend; zur Umsetzung neigend",notes:"Hindernisse im Traum √ºberwinden ‚Üí Bew√§hrungsprobe im Leben; umsetzbar."},
  {type:"warnend; ahnenbezogen",notes:"Familie/Vorfahren; Tr√§ume mahnen zur Aufmerksamkeit."},
  {type:"neutral-positiv",notes:"G√ºnstiger Hintergrund; keine strengen Regeln."},
  {type:"vorausschauend; intuitiv",notes:"Zuk√ºnftige Linien erfassbar; Einsamkeit erh√∂ht Klarheit."},
  {type:"sehr informativ",notes:"H√§ufig zutreffend; Details notieren."},
  {type:"prophetisch zur Berufung",notes:"Hinweise auf Berufung/Langfristkurs."},
  {type:"ohne klare Kategorie",notes:"Angespannter Tag; keine Sonderregeln."},
  {type:"meist ‚Äûleer‚Äú",notes:"Ohne starke Marker wenig Gehalt; mit Akzenten ‚Äî Familie/Abstammung."},
  {type:"Marker f√ºr morgen ‚Äûprophetisch‚Äú",notes:"Signal, dass der 12. bedeutsam sein kann."},
  {type:"hell und zutreffend",notes:"Ruhige, klare Tr√§ume, oft best√§tigt."},
  {type:"Aha-Momente und Hinweise",notes:"Eingebungen; Impuls bis zur n√§chsten Nacht."},
  {type:"emotionale Entladung",notes:"Unangenehme Szenen = Spannungsabfuhr."},
  {type:"keine feste Kategorie",notes:"Warnungen im Tag; kein spezieller Traumtyp."},
  {type:"reinigend",notes:"Innere Spannung l√∂sen."},
  {type:"neutral-arbeitsam",notes:"Keine besonderen Erwartungen."},
  {type:"energetisch (nicht pr√§diktiv)",notes:"F√ºr Kraft/Licht-Praxis gut."},
  {type:"√ºberwiegend nicht informativ",notes:"Deutung kann man auslassen."},
  {type:"ohne eigene Kennzeichnung",notes:"Entschlossenheit; kein fester Typ."},
  {type:"regenerativ (n√§chste Nacht)",notes:"N√§chste Nacht wenig Info, aber Erholung/Heilung."},
  {type:"wissensbringend; lehrreich",notes:"Bringt Wissen und praktische Hinweise."},
  {type:"invertiert (‚Äûumgekehrt‚Äú)",notes:"Im Gegenteil deuten (Kontext beachten)."},
  {type:"diagnostisch",notes:"Spiegelt K√∂rper/sexuelle Energie."},
  {type:"Stille / minimale Signale",notes:"Pause, Ruhe der Wahrnehmung."},
  {type:"√ºber Selbstwert",notes:"Selbstwert, Grenzen, Selbstf√ºrsorge."},
  {type:"intuitiv-prophetisch (zwei N√§chte)",notes:"Eingebungen heute und morgen."},
  {type:"ausgeglichen",notes:"Harmonischer Hintergrund."},
  {type:"liminal; ‚Äûrituell‚Äú",notes:"√úbergangsmotive; keine Extra-Klasse."},
  {type:"abschlie√üend prophetisch",notes:"Informationsreich; Fehler und Wachstumspunkte."}
];
const TABLE_ES=[null,
  {type:"sin categor√≠a fija",notes:"Mejor momento para fijar intenciones y planes; br√∫jula, no pron√≥stico."},
  {type:"sin etiqueta espec√≠fica",notes:"D√≠a de generosidad/planificaci√≥n; sin categor√≠a especial."},
  {type:"de prueba; tienden a cumplirse",notes:"Superar obst√°culos en el sue√±o ‚Üí prueba en la vida; realizable."},
  {type:"de advertencia; ancestrales",notes:"Familia/ancestros; requieren atenci√≥n."},
  {type:"neutral-positivo",notes:"Fondo favorable; sin reglas estrictas."},
  {type:"anticipatorios; intuitivos",notes:"Se captan l√≠neas del futuro; la soledad aclara."},
  {type:"muy informativos",notes:"A menudo se cumplen; anota detalles."},
  {type:"prof√©ticos sobre la vocaci√≥n",notes:"Insin√∫an vocaci√≥n y rumbo a largo plazo."},
  {type:"sin categor√≠a clara",notes:"D√≠a tenso; sin reglas especiales."},
  {type:"mayormente ¬´vac√≠os¬ª",notes:"Sin marcadores fuertes hay poco sentido; con se√±ales ‚Äî familia/linaje."},
  {type:"marcador para los ¬´prof√©ticos¬ª de ma√±ana",notes:"Se√±al de que el 12 puede ser significativo."},
  {type:"luminosos y veraces",notes:"Sue√±os claros y tranquilos, a menudo confirmados."},
  {type:"insights e indicaciones",notes:"El impulso sigue la pr√≥xima noche."},
  {type:"descarga emocional",notes:"Escenas desagradables liberan tensi√≥n."},
  {type:"sin categor√≠a fija",notes:"Advertencias del d√≠a; sin tipo especial."},
  {type:"depurativos",notes:"Ayudan a soltar tensi√≥n interna."},
  {type:"neutrales-laborales",notes:"Sin expectativas especiales."},
  {type:"energ√©ticos (no predictivos)",notes:"Para pr√°cticas de fuerza/luz."},
  {type:"principalmente no informativos",notes:"Puedes omitir la interpretaci√≥n."},
  {type:"sin etiqueta espec√≠fica",notes:"Determinaci√≥n; sin tipo definido."},
  {type:"restaurativos (la pr√≥xima noche)",notes:"Poca info pero recarga/sanaci√≥n."},
  {type:"de conocimiento; did√°cticos",notes:"Aportan saber y pistas pr√°cticas."},
  {type:"invertidos (¬´al rev√©s¬ª)",notes:"Leer al contrario (con contexto)."},
  {type:"diagn√≥sticos",notes:"Reflejan estado del cuerpo/energ√≠a sexual."},
  {type:"silencio / se√±ales m√≠nimas",notes:"Pausa y descanso de la percepci√≥n."},
  {type:"sobre autoestima",notes:"Val√≠a propia, l√≠mites, autocuidado."},
  {type:"intuitivo-prof√©ticos (dos noches)",notes:"Revelaciones hoy y ma√±ana."},
  {type:"equilibrados",notes:"Fondo armonioso; sin etiqueta r√≠gida."},
  {type:"liminales; ¬´rituales¬ª",notes:"Motivos de transici√≥n; sin clasificaci√≥n aparte."},
  {type:"prof√©ticos de cierre",notes:"Ricos en informaci√≥n; muestran errores y crecimiento."}
];
const TABLE_IT=[null,
  {type:"senza categoria fissa",notes:"Momento ideale per fissare intenzioni e piani; bussola, non previsione."},
  {type:"senza etichetta specifica",notes:"Giorno di generosit√†/pianificazione; nessuna categoria speciale."},
  {type:"di verifica; inclini a realizzarsi",notes:"Superare ostacoli nel sogno ‚Üí prova nella vita; attuabile."},
  {type:"di avvertimento; legati agli antenati",notes:"Famiglia/antenati; richiedono attenzione."},
  {type:"neutro-positivo",notes:"Sfondo favorevole; niente regole rigide."},
  {type:"anticipatori; intuitivi",notes:"Si colgono linee di futuro; la solitudine chiarisce."},
  {type:"altamente informativi",notes:"Spesso si avverano; annota i dettagli."},
  {type:"profetici sulla vocazione",notes:"Alludono a vocazione e rotta di lungo periodo."},
  {type:"senza categoria chiara",notes:"Giorno teso; nessuna regola speciale."},
  {type:"per lo pi√π ¬´vuoti¬ª",notes:"Senza marcatori forti poco senso; con segni ‚Äî famiglia/linea."},
  {type:"marcatore per i ¬´profetici¬ª di domani",notes:"Segnale che il 12 pu√≤ essere significativo."},
  {type:"luminosi e veritieri",notes:"Sogni chiari e sereni, spesso confermati."},
  {type:"intuizioni e indicazioni",notes:"L‚Äôimpulso continua la notte seguente."},
  {type:"scarico emotivo",notes:"Scene spiacevoli rilasciano tensione."},
  {type:"senza categoria fissa",notes:"Avvertimenti del giorno; nessun tipo speciale."},
  {type:"purificatori",notes:"Sciolgono tensioni interne."},
  {type:"neutri-operosi",notes:"Nessuna aspettativa particolare."},
  {type:"energetici (non predittivi)",notes:"Per pratiche di forza/luce."},
  {type:"prevalentemente non informativi",notes:"Si pu√≤ tralasciare la lettura."},
  {type:"senza etichetta specifica",notes:"Determinazione; nessun tipo definito."},
  {type:"restorativi (la notte successiva)",notes:"Poca info ma ricarica/guarigione."},
  {type:"portatori di conoscenza; didattici",notes:"Apportano sapere e spunti pratici."},
  {type:"invertiti (¬´al contrario¬ª)",notes:"Si leggono al contrario (col contesto)."},
  {type:"diagnostici",notes:"Riflettono stato del corpo/energia sessuale."},
  {type:"silenzio / segnali minimi",notes:"Pausa e riposo della percezione."},
  {type:"sull'autostima",notes:"Valore di s√©, confini, cura di s√©."},
  {type:"intuitivi-profetici (due notti)",notes:"Rivelazioni oggi e domani."},
  {type:"equilibrati",notes:"Sfondo armonioso; senza etichetta rigida."},
  {type:"liminali; ¬´rituali¬ª",notes:"Motivi di transizione; nessuna classe separata."},
  {type:"profetici conclusivi",notes:"Ricchi d'informazioni; mostrano errori e crescita."}
];
const TABLE_UK=[null,
  {type:"–±–µ–∑ —Ñ—ñ–∫—Å–æ–≤–∞–Ω–æ—ó –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó",notes:"–ù–∞–π–∫—Ä–∞—â–∏–π —á–∞—Å –¥–ª—è –Ω–∞–º—ñ—Ä—ñ–≤ —ñ –ø–ª–∞–Ω—ñ–≤; —Å–Ω–∏ ‚Äî –∫–æ–º–ø–∞—Å, –Ω–µ –ø—Ä–æ–≥–Ω–æ–∑."},
  {type:"–±–µ–∑ –æ–∫—Ä–µ–º–æ—ó –ø–æ–∑–Ω–∞—á–∫–∏",notes:"–î–µ–Ω—å —â–µ–¥—Ä–æ—Å—Ç—ñ/–ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è; –æ–∫—Ä–µ–º–æ—ó –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –Ω–µ–º–∞—î."},
  {type:"–ø–µ—Ä–µ–≤—ñ—Ä–æ—á–Ω—ñ; —Å—Ö–∏–ª—å–Ω—ñ –¥–æ –≤—Ç—ñ–ª–µ–Ω–Ω—è",notes:"–ü–æ–¥–æ–ª–∞–Ω–Ω—è –ø–µ—Ä–µ—à–∫–æ–¥ —É —Å–Ω—ñ ‚Üí –≤–∏–ø—Ä–æ–±—É–≤–∞–Ω–Ω—è –≤ –∂–∏—Ç—Ç—ñ; –∑–¥—ñ–π—Å–Ω–µ–Ω–Ω–æ."},
  {type:"–∑–∞—Å—Ç–µ—Ä–µ–∂–Ω—ñ; —Ä–æ–¥–æ–≤—ñ",notes:"–¢–µ–º–∏ —Å—ñ–º'—ó/–ø—Ä–µ–¥–∫—ñ–≤; –ø–æ—Ç—Ä–µ–±—É—é—Ç—å —É–≤–∞–≥–∏."},
  {type:"–Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ-–ø–æ–∑–∏—Ç–∏–≤–Ω—ñ",notes:"–°–ø—Ä–∏—è—Ç–ª–∏–≤–∏–π —Ñ–æ–Ω; –±–µ–∑ –∂–æ—Ä—Å—Ç–∫–∏—Ö –ø—Ä–∞–≤–∏–ª."},
  {type:"–ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–ª—å–Ω—ñ; —ñ–Ω—Ç—É—ó—Ç–∏–≤–Ω—ñ",notes:"–õ—ñ–Ω—ñ—ó –º–∞–π–±—É—Ç–Ω—å–æ–≥–æ –≤–ª–æ–≤–ª—é—é—Ç—å—Å—è –∫—Ä–∞—â–µ; —É—Å–∞–º—ñ—Ç–Ω–µ–Ω–Ω—è –¥–æ–¥–∞—î —è—Å–Ω–æ—Å—Ç—ñ."},
  {type:"–≤–∏—Å–æ–∫–æ—ñ–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ñ",notes:"–ß–∞—Å—Ç–æ –∑–±—É–≤–∞—é—Ç—å—Å—è; —Ñ—ñ–∫—Å—É–π—Ç–µ –¥–µ—Ç–∞–ª—ñ."},
  {type:"–ø—Ä–æ—Ä–æ—á—ñ –ø—Ä–æ –ø–æ–∫–ª–∏–∫–∞–Ω–Ω—è",notes:"–ù–∞—Ç—è–∫–∞—é—Ç—å –Ω–∞ –ø–æ–∫–ª–∏–∫–∞–Ω–Ω—è —ñ –¥–æ–≤–≥–æ—Å—Ç—Ä–æ–∫–æ–≤–∏–π –∫—É—Ä—Å."},
  {type:"–±–µ–∑ —á—ñ—Ç–∫–æ—ó –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó",notes:"–ù–∞–ø—Ä—É–∂–µ–Ω–∏–π –¥–µ–Ω—å; –±–µ–∑ —Å–ø–µ—Ü. –ø—Ä–∞–≤–∏–ª."},
  {type:"–ø–µ—Ä–µ–≤–∞–∂–Ω–æ ¬´–ø–æ—Ä–æ–∂–Ω—ñ¬ª",notes:"–ë–µ–∑ —Å–∏–ª—å–Ω–∏—Ö –º–∞—Ä–∫–µ—Ä—ñ–≤ –º–∞–ª–æ —Å–µ–Ω—Å—É; –∑ –∞–∫—Ü–µ–Ω—Ç–∞–º–∏ ‚Äî —Ä–æ–¥–∏–Ω–∞/—Ä—ñ–¥."},
  {type:"–º–∞—Ä–∫–µ—Ä –Ω–∞ –∑–∞–≤—Ç—Ä–∞—à–Ω—ñ ¬´–≤—ñ—â—ñ¬ª",notes:"–°–∏–≥–Ω–∞–ª, —â–æ 12-–≥–æ –º–æ–∂–µ –±—É—Ç–∏ –∑–Ω–∞—á—É—â–æ—é."},
  {type:"—Å–≤—ñ—Ç–ª—ñ –π –ø—Ä–∞–≤–¥–∏–≤—ñ",notes:"–Ø—Å–Ω—ñ —Å–ø–æ–∫—ñ–π–Ω—ñ —Å–Ω–∏, —á–∞—Å—Ç–æ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—é—Ç—å—Å—è."},
  {type:"—ñ–Ω—Å–∞–π—Ç–∏ –π –ø—ñ–¥–∫–∞–∑–∫–∏",notes:"–û—Å—è—è–Ω–Ω—è; —ñ–º–ø—É–ª—å—Å —Ç—Ä–∏–≤–∞—î –Ω–∞—Å—Ç—É–ø–Ω–æ—ó –Ω–æ—á—ñ."},
  {type:"–µ–º–æ—Ü—ñ–π–Ω–µ —Ä–æ–∑–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è",notes:"–ù–µ–ø—Ä–∏—î–º–Ω—ñ —Å—é–∂–µ—Ç–∏ ‚Äî –≤–∏–≤—ñ–ª—å–Ω–µ–Ω–Ω—è –Ω–∞–ø—Ä—É–≥–∏."},
  {type:"–±–µ–∑ —Ñ—ñ–∫—Å–æ–≤–∞–Ω–æ—ó –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó",notes:"–ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –¥–Ω—è; –æ—Å–æ–±–ª–∏–≤–æ–≥–æ —Ç–∏–ø—É –Ω–µ–º–∞—î."},
  {type:"–æ—á–∏—Å–Ω—ñ",notes:"–ó–Ω—ñ–º–∞—é—Ç—å –≤–Ω—É—Ç—Ä—ñ—à–Ω—é –Ω–∞–ø—Ä—É–≥—É."},
  {type:"–Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ-—Ä–æ–±–æ—á—ñ",notes:"–ë–µ–∑ –æ—Å–æ–±–ª–∏–≤–∏—Ö –æ—á—ñ–∫—É–≤–∞–Ω—å."},
  {type:"–µ–Ω–µ—Ä–≥–µ—Ç–∏—á–Ω—ñ (–Ω–µ –ø—Ä–æ—Ä–æ—á—ñ)",notes:"–î–æ–±—Ä—ñ –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫ —Å–∏–ª–∏/—Å–≤—ñ—Ç–ª–∞."},
  {type:"–∑–¥–µ–±—ñ–ª—å—à–æ–≥–æ –Ω–µ—ñ–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ñ",notes:"–ú–æ–∂–Ω–∞ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ —Ç–ª—É–º–∞—á–µ–Ω–Ω—è."},
  {type:"–±–µ–∑ –æ–∫—Ä–µ–º–æ—ó –ø–æ–∑–Ω–∞—á–∫–∏",notes:"–†—ñ—à—É—á—ñ—Å—Ç—å; —Ç–∏–ø –Ω–µ –∑–∞–¥–∞–Ω–æ."},
  {type:"–≤—ñ–¥–Ω–æ–≤–Ω—ñ (–Ω–∞—Å—Ç—É–ø–Ω–æ—ó –Ω–æ—á—ñ)",notes:"–ú–∞–ª–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó, –∞–ª–µ –ø—ñ–¥–∑–∞—Ä—è–¥–∫–∞/–∑—Ü—ñ–ª–µ–Ω–Ω—è."},
  {type:"–ø—ñ–∑–Ω–∞–≤–∞–ª—å–Ω—ñ; –Ω–∞–≤—á–∞–ª—å–Ω—ñ",notes:"–ü—Ä–∏–Ω–æ—Å—è—Ç—å –∑–Ω–∞–Ω–Ω—è —ñ –ø—Ä–∞–∫—Ç–∏—á–Ω—ñ –ø—ñ–¥–∫–∞–∑–∫–∏."},
  {type:"—ñ–Ω–≤–µ—Ä—Å—ñ–π–Ω—ñ (¬´–Ω–∞–≤–ø–∞–∫–∏¬ª)",notes:"–¢–ª—É–º–∞—á–∏—Ç–∏ —É –∑–≤–æ—Ä–æ—Ç–Ω–æ–º—É –∫–ª—é—á—ñ (–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º)."},
  {type:"–¥—ñ–∞–≥–Ω–æ—Å—Ç–∏—á–Ω—ñ",notes:"–í—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å —Å—Ç–∞–Ω —Ç—ñ–ª–∞/—Å–µ–∫—Å—É–∞–ª—å–Ω–æ—ó –µ–Ω–µ—Ä–≥—ñ—ó."},
  {type:"—Ç–∏—à–∞ / –º—ñ–Ω—ñ–º—É–º —Å–∏–≥–Ω–∞–ª—ñ–≤",notes:"–ü–∞—É–∑–∞ –π –≤—ñ–¥–ø–æ—á–∏–Ω–æ–∫ —Å–ø—Ä–∏–π–Ω—è—Ç—Ç—è."},
  {type:"–ø—Ä–æ —Å–∞–º–æ–æ—Ü—ñ–Ω–∫—É",notes:"–ü—ñ–¥—Å–≤—ñ—á—É—é—Ç—å —Ü—ñ–Ω–Ω—ñ—Å—Ç—å —Å–µ–±–µ, –º–µ–∂—ñ, —Ç—É—Ä–±–æ—Ç—É."},
  {type:"—ñ–Ω—Ç—É—ó—Ç–∏–≤–Ω–æ-–ø—Ä–æ—Ä–æ—á—ñ (–¥–≤—ñ –Ω–æ—á—ñ)",notes:"–û—Å—è—è–Ω–Ω—è —Å—å–æ–≥–æ–¥–Ω—ñ —ñ –∑–∞–≤—Ç—Ä–∞."},
  {type:"–∑–±–∞–ª–∞–Ω—Å–æ–≤–∞–Ω—ñ",notes:"–ì–∞—Ä–º–æ–Ω—ñ–π–Ω–∏–π —Ñ–æ–Ω; –±–µ–∑ –∂–æ—Ä—Å—Ç–∫–æ—ó –ø–æ–∑–Ω–∞—á–∫–∏."},
  {type:"–ø–æ–≥—Ä–∞–Ω–∏—á–Ω—ñ; ¬´—Ä–∏—Ç—É–∞–ª—å–Ω—ñ¬ª",notes:"–ü–µ—Ä–µ—Ö—ñ–¥–Ω—ñ –º–æ—Ç–∏–≤–∏; –±–µ–∑ –æ–∫—Ä–µ–º–æ—ó –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó."},
  {type:"–ø—ñ–¥—Å—É–º–∫–æ–≤—ñ –ø—Ä–æ—Ä–æ—á—ñ",notes:"–ë–∞–≥–∞—Ç–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó; –ø–æ–∫–∞–∑—É—é—Ç—å –ø–æ–º–∏–ª–∫–∏ —Ç–∞ —Ä—ñ—Å—Ç."}
];
const TABLE_FR=[null,
  {type:"sans cat√©gorie fixe",notes:"Moment id√©al pour poser des intentions et des plans ; boussole, pas une pr√©diction."},
  {type:"sans √©tiquette d√©di√©e",notes:"Jour de g√©n√©rosit√©/planification ; pas de cat√©gorie sp√©ciale."},
  {type:"d‚Äô√©preuve; enclins √† se r√©aliser",notes:"Franchir un obstacle en r√™ve ‚Üí √©preuve dans la vie ; r√©alisable."},
  {type:"avertisseurs; lign√©es familiales",notes:"Famille/anc√™tres ; vigilance requise."},
  {type:"neutres-positifs",notes:"Contexte favorable ; pas de r√®gles strictes."},
  {type:"anticipatifs; intuitifs",notes:"Les lignes du futur s‚Äôattrapent mieux ; la solitude clarifie."},
  {type:"tr√®s informatifs",notes:"Souvent av√©r√©s ; notez les d√©tails."},
  {type:"proph√©tiques sur la vocation",notes:"Sugg√®rent vocation et cap de long terme."},
  {type:"sans cat√©gorie claire",notes:"Journ√©e tendue ; pas de r√®gles sp√©ciales."},
  {type:"plut√¥t ¬´vides¬ª",notes:"Sans marqueurs forts, peu de sens ; avec signes ‚Äî famille/ascendance."},
  {type:"marqueur pour les ¬´proph√©tiques¬ª de demain",notes:"Signal que le 12 peut √™tre marquant."},
  {type:"lumineux et v√©ridiques",notes:"R√™ves clairs et calmes, souvent confirm√©s."},
  {type:"insights et indications",notes:"L‚Äô√©lan continue la nuit suivante."},
  {type:"d√©charge √©motionnelle",notes:"R√™ves d√©sagr√©ables = lib√©ration de tension."},
  {type:"sans cat√©gorie fixe",notes:"Avertissements du jour ; pas de type particulier."},
  {type:"purificateurs",notes:"All√®gent la tension int√©rieure."},
  {type:"neutres-productifs",notes:"Sans attentes particuli√®res."},
  {type:"√©nerg√©tiques (non pr√©dictifs)",notes:"Bon pour pratiques de force/lumi√®re."},
  {type:"majoritairement non informatifs",notes:"On peut se passer d‚Äôinterpr√©tation."},
  {type:"sans √©tiquette d√©di√©e",notes:"D√©termination ; pas de type d√©fini."},
  {type:"restaurateurs (nuit suivante)",notes:"Peu d‚Äôinfo mais recharge/gu√©rison."},
  {type:"porteurs de savoir; p√©dagogiques",notes:"Apportent connaissances et pistes pratiques."},
  {type:"invers√©s (¬´√† l‚Äôenvers¬ª)",notes:"Lecture inverse (contexte)."},
  {type:"diagnostiques",notes:"Refl√®tent l‚Äô√©tat du corps/√©nergie sexuelle."},
  {type:"silence / signaux minimaux",notes:"Pause et repos de la perception."},
  {type:"sur l‚Äôestime de soi",notes:"Valeur personnelle, limites, soin de soi."},
  {type:"intuitifs-proph√©tiques (deux nuits)",notes:"Illuminations aujourd‚Äôhui et demain."},
  {type:"√©quilibr√©s",notes:"Contexte harmonieux ; sans √©tiquette rigide."},
  {type:"liminaires ; ¬´rituels¬ª",notes:"Motifs de transition ; pas de classification s√©par√©e."},
  {type:"proph√©tiques de cl√¥ture",notes:"Riches en informations ; montrent erreurs et axes de croissance."}
];
const TABLES={ru:TABLE_RU,en:TABLE_EN,de:TABLE_DE,es:TABLE_ES,it:TABLE_IT,uk:TABLE_UK,fr:TABLE_FR};

/* ============= –ß–∞—Å–æ–≤—ã–µ –ø–æ—è—Å–∞ ============= */
const TZ_LIST=[
  "Auto (system)","Europe/Prague","Europe/Kyiv","Europe/Moscow","Europe/Warsaw","Europe/Berlin","Europe/Paris","Europe/London","Europe/Madrid","Europe/Rome","Europe/Istanbul","Europe/Athens",
  "Asia/Dubai","Asia/Tbilisi","Asia/Yerevan","Asia/Almaty","Asia/Tashkent","Asia/Novosibirsk","Asia/Kolkata","Asia/Bangkok","Asia/Hong_Kong","Asia/Shanghai","Asia/Tokyo","Asia/Seoul",
  "Australia/Sydney","Pacific/Auckland","Africa/Cairo","Africa/Johannesburg","Africa/Nairobi",
  "America/Sao_Paulo","America/Buenos_Aires","America/Toronto","America/New_York","America/Chicago","America/Denver","America/Los_Angeles","America/Mexico_City","America/Bogota","America/Lima","America/Santiago"
];

/* ============= –ê—Å—Ç—Ä–æ–Ω–æ–º–∏—è ============= */
const SYNODIC=29.530588853;                 // —Å–∏–Ω–æ–¥–∏—á–µ—Å–∫–∏–π –º–µ—Å—è—Ü (—Å—É—Ç–æ–∫)
const REF=Date.UTC(2000,0,6,18,14,0);       // –æ–ø–æ—Ä–Ω–æ–µ –Ω–æ–≤–æ–ª—É–Ω–∏–µ (UTC)
function offsetISO(tz, baseUTC){
  const parts=new Intl.DateTimeFormat('en-US',{timeZone:tz,hour12:false,year:'numeric',month:'2-digit',day:'2-digit',hour:'2-digit',minute:'2-digit',second:'2-digit'}).formatToParts(baseUTC);
  const m=Object.fromEntries(parts.map(p=>[p.type,p.value]));
  const local=new Date(`${m.year}-${m.month}-${m.day}T${m.hour}:${m.minute}:${m.second}Z`);
  const diffMin=Math.round((local-baseUTC)/60000);
  const sign=diffMin>=0?'+':'-'; const v=Math.abs(diffMin); const hh=String(Math.floor(v/60)).padStart(2,'0'); const mm=String(v%60).padStart(2,'0');
  return `${sign}${hh}:${mm}`;
}
function makeLocalNoonYMD(y,m,d,tz){
  const off=offsetISO(tz, new Date(Date.UTC(y,m-1,d,12,0,0)));
  return new Date(`${y}-${String(m).padStart(2,'0')}-${String(d).padStart(2,'0')}T12:00:00${off}`);
}
function moonAge(date){ const days=(date.getTime()-REF)/86400000; return ((days%SYNODIC)+SYNODIC)%SYNODIC; }
function lunarDayFromAge(age){ return Math.max(1,Math.min(30,Math.floor(age)+1)); }
const B=[1.84566,5.53699,9.22831,12.91963,16.61096,20.30228,23.99361,27.68493];
function phaseKeyFromAge(age){
  if(age<B[0]||age>=B[7])return "New";
  if(age<B[1])return "WaxingCrescent";
  if(age<B[2])return "FirstQuarter";
  if(age<B[3])return "WaxingGibbous";
  if(age<B[4])return "Full";
  if(age<B[5])return "WaningGibbous";
  if(age<B[6])return "LastQuarter";
  if(age<B[7])return "WaningCrescent";
  return "New";
}
const PHASE_EMOJI={New:"üåë",WaxingCrescent:"üåí",FirstQuarter:"üåì",WaxingGibbous:"üåî",Full:"üåï",WaningGibbous:"üåñ",LastQuarter:"üåó",WaningCrescent:"üåò"};
const PHASE_L10N={
  ru:{New:"–ù–æ–≤–æ–ª—É–Ω–∏–µ",WaxingCrescent:"–†–∞—Å—Ç—É—â–∏–π —Å–µ—Ä–ø",FirstQuarter:"–ü–µ—Ä–≤–∞—è —á–µ—Ç–≤–µ—Ä—Ç—å",WaxingGibbous:"–†–∞—Å—Ç—É—â–∞—è –≤—ã–ø—É–∫–ª–∞—è",Full:"–ü–æ–ª–Ω–æ–ª—É–Ω–∏–µ",WaningGibbous:"–£–±—ã–≤–∞—é—â–∞—è –≤—ã–ø—É–∫–ª–∞—è",LastQuarter:"–ü–æ—Å–ª–µ–¥–Ω—è—è —á–µ—Ç–≤–µ—Ä—Ç—å",WaningCrescent:"–£–±—ã–≤–∞—é—â–∏–π —Å–µ—Ä–ø"},
  en:{New:"New Moon",WaxingCrescent:"Waxing Crescent",FirstQuarter:"First Quarter",WaxingGibbous:"Waxing Gibbous",Full:"Full Moon",WaningGibbous:"Waning Gibbous",LastQuarter:"Last Quarter",WaningCrescent:"Waning Crescent"},
  de:{New:"Neumond",WaxingCrescent:"Zunehmende Sichel",FirstQuarter:"Erstes Viertel",WaxingGibbous:"Zunehmende Gibbeuse",Full:"Vollmond",WaningGibbous:"Abnehmende Gibbeuse",LastQuarter:"Letztes Viertel",WaningCrescent:"Abnehmende Sichel"},
  es:{New:"Luna nueva",WaxingCrescent:"Creciente",FirstQuarter:"Cuarto creciente",WaxingGibbous:"Gibosa creciente",Full:"Luna llena",WaningGibbous:"Gibosa menguante",LastQuarter:"Cuarto menguante",WaningCrescent:"Menguante"},
  it:{New:"Luna nuova",WaxingCrescent:"Falce crescente",FirstQuarter:"Primo quarto",WaxingGibbous:"Gibbosa crescente",Full:"Luna piena",WaningGibbous:"Gibbosa calante",LastQuarter:"Ultimo quarto",WaningCrescent:"Falce calante"},
  uk:{New:"–ù–æ–≤–∏–π –º—ñ—Å—è—Ü—å",WaxingCrescent:"–ó—Ä–æ—Å—Ç–∞—é—á–∏–π —Å–µ—Ä–ø",FirstQuarter:"–ü–µ—Ä—à–∞ —á–≤–µ—Ä—Ç—å",WaxingGibbous:"–ó—Ä–æ—Å—Ç–∞—é—á–∞ –æ–ø—É–∫–ª–∞",Full:"–ü–æ–≤–Ω–∏–π –º—ñ—Å—è—Ü—å",WaningGibbous:"–°–ø–∞–¥–Ω–∞ –æ–ø—É–∫–ª–∞",LastQuarter:"–û—Å—Ç–∞–Ω–Ω—è —á–≤–µ—Ä—Ç—å",WaningCrescent:"–°–ø–∞–¥–Ω–∏–π —Å–µ—Ä–ø"},
  fr:{New:"Nouvelle Lune",WaxingCrescent:"Croissant croissant",FirstQuarter:"Premier quartier",WaxingGibbous:"Gibbeuse croissante",Full:"Pleine Lune",WaningGibbous:"Gibbeuse d√©croissante",LastQuarter:"Dernier quartier",WaningCrescent:"Croissant d√©croissant"}
};

/* ============= –£—Ç–∏–ª–∏—Ç—ã –¥–∞—Ç—ã/–ª–æ–∫–∞–ª–∏ ============= */
function ymd(date, tz){
  const s=new Intl.DateTimeFormat('en-CA',{timeZone:tz,year:'numeric',month:'2-digit',day:'2-digit'}).format(date);
  const [y,m,d]=s.split('-').map(Number); return {y,m,d};
}
function ymOf(date, tz){
  const p=new Intl.DateTimeFormat('en-CA',{timeZone:tz,year:'numeric',month:'2-digit',day:'2-digit'}).formatToParts(date);
  const map=Object.fromEntries(p.map(x=>[x.type,x.value])); return {y:+map.year,m:+map.month};
}
function daysInMonth(y,m){ return new Date(Date.UTC(y,m,0)).getUTCDate(); } // m: 1..12
function fmtDate(d, tz){ return new Intl.DateTimeFormat(lang,{timeZone:tz,day:"numeric",month:"long"}).format(d); }

/* ============= UI –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ ============= */
const $=id=>document.getElementById(id);
const langSel=$("lang"), tzSel=$("tz"), monthLabel=$("monthLabel"), calendarTbody=$("tbody");
const prevBtn=$("prev"), nextBtn=$("next"), todayBtn=$("today"), navDreambookBtn=$("navDreambook");
const SUPPORTED=["ru","en","de","es","it","uk","fr"];
const sysLang=(navigator.language||"ru").slice(0,2).toLowerCase();
let lang=SUPPORTED.includes(sysLang)?sysLang:"ru";
let tz=Intl.DateTimeFormat().resolvedOptions().timeZone||"Europe/Prague";
let navDate=new Date();

function fillLang(){
  const names={ru:"–†—É—Å—Å–∫–∏–π",en:"English",de:"Deutsch",es:"Espa√±ol",it:"Italiano",uk:"–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞",fr:"Fran√ßais"};
  SUPPORTED.forEach(code=>{const o=document.createElement("option");o.value=code;o.textContent=names[code];langSel.appendChild(o);});
  langSel.value=lang;
}
function fillTZ(){
  TZ_LIST.forEach(z=>{const o=document.createElement("option");o.value=z;o.textContent=z;tzSel.appendChild(o);});
  tzSel.value=tzSel.querySelector(`option[value="${tz}"]`)?tz:"Auto (system)";
  $("tzActive").textContent=tzSel.value==="Auto (system)"?tz:tzSel.value;
}
function t(){ return I18N[lang] || I18N.ru; }
function applyI18N(){
  const L=t();
  $("brandName").textContent=L.brand;
  navDreambookBtn.textContent=L.navDreambook;
  $("title").textContent=L.title; $("subtitle").textContent=L.subtitle;
  $("thDate").textContent=L.thDate; $("thDay").textContent=L.thDay; $("thType").textContent=L.thType; $("thNotes").textContent=L.thNotes;
  $("tzLabel").textContent=L.tzLabel; $("legend").textContent=L.legend; $("sources").textContent=L.sources;
  $("footerText").innerHTML=L.footer.replace("{year}",new Date().getFullYear());
  document.documentElement.lang=lang;
  todayBtn.textContent=L.today;

  // –°–æ–Ω–Ω–∏–∫ ‚Äî –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä
  $("dbTitle").textContent=L.dbTitle;
  $("dbThSymbol").textContent=L.dbSymbol;
  $("dbThSummary").textContent=L.dbSummary;
  $("dbThConf").textContent=L.dbConfidence;
  const ds=$("dreamSearch");
  ds.placeholder=L.dbSearchPlaceholder;
}
/** –§–∞–∑–∞ –õ—É–Ω—ã —É –ª–æ–≥–æ—Ç–∏–ø–∞ */
function updateMoonIcon(uiTZ){
  const n=new Date(); const noon=makeLocalNoonYMD(...Object.values(ymd(n,uiTZ)), uiTZ);
  const key=phaseKeyFromAge(moonAge(noon));
  const emoji=PHASE_EMOJI[key];
  const name=(PHASE_L10N[lang]||PHASE_L10N.ru)[key];
  const nice=fmtDate(noon,uiTZ)+" "+new Intl.DateTimeFormat(lang,{timeZone:uiTZ,year:"numeric"}).format(noon);
  const el=$("moonIcon"); el.textContent=emoji; el.title=`${name} ‚Ä¢ ${nice}`; el.setAttribute("aria-label",`${name} ‚Ä¢ ${nice}`);
}
/** –†–µ–Ω–¥–µ—Ä –º–µ—Å—è—Ü–∞ */
function renderMonth(){
  const uiTZ = tzSel.value==="Auto (system)" ? tz : tzSel.value;
  $("tzActive").textContent=uiTZ;

  const {y:vy,m:vm}=ymOf(navDate, uiTZ);
  monthLabel.textContent=new Intl.DateTimeFormat(lang,{timeZone:uiTZ,month:"long",year:"numeric"}).format(makeLocalNoonYMD(vy,vm,1,uiTZ));

  const table=TABLES[lang]||TABLES.ru;
  const today=ymd(new Date(), uiTZ);

  calendarTbody.innerHTML="";
  const total=daysInMonth(vy,vm);
  for(let d=1; d<=total; d++){
    const localNoon=makeLocalNoonYMD(vy,vm,d,uiTZ);
    const lday=lunarDayFromAge(moonAge(localNoon));
    const row=table[lday];

    const tr=document.createElement("tr");
    const rowYMD=ymd(localNoon, uiTZ);
    if(rowYMD.y===today.y && rowYMD.m===today.m && rowYMD.d===today.d){
      tr.classList.add("today");
      tr.setAttribute("aria-current","date");
    }

    const tdDate=document.createElement("td"); tdDate.className="dateCell"; tdDate.textContent=fmtDate(localNoon,uiTZ);
    const tdDay=document.createElement("td"); tdDay.className="dayCell"; tdDay.textContent=String(lday);
    const tdType=document.createElement("td"); tdType.className="typeCell"; tdType.textContent=row.type;
    const tdNotes=document.createElement("td"); tdNotes.className="notesCell"; tdNotes.textContent=row.notes;

    tr.append(tdDate,tdDay,tdType,tdNotes); calendarTbody.appendChild(tr);
  }
  updateMoonIcon(uiTZ);
}

/* === –°–æ–±—ã—Ç–∏—è –∏ —Å—Ç–∞—Ä—Ç === */
langSel.addEventListener("change",()=>{ lang=langSel.value; applyI18N(); renderMonth(); renderDreambookCount(); });
tzSel.addEventListener("change",()=>{ if(tzSel.value==="Auto (system)"){$("tzActive").textContent=tz;} renderMonth(); });
prevBtn.addEventListener("click",()=>{ const uiTZ=tzSel.value==="Auto (system)"?tz:tzSel.value; const {y,m}=ymOf(navDate,uiTZ); navDate=makeLocalNoonYMD(m===1?y-1:y, m===1?12:m-1, 15, uiTZ); renderMonth(); });
nextBtn.addEventListener("click",()=>{ const uiTZ=tzSel.value==="Auto (system)"?tz:tzSel.value; const {y,m}=ymOf(navDate,uiTZ); navDate=makeLocalNoonYMD(m===12?y+1:y, m===12?1:m+1, 15, uiTZ); renderMonth(); });
todayBtn.addEventListener("click",()=>{ navDate=new Date(); renderMonth(); });

(function init(){
  fillLang(); fillTZ(); applyI18N();
  $("year").textContent=new Date().getFullYear();
  renderMonth();
})();
</script>

<!-- === –°–∫—Ä–∏–ø—Ç 2: ¬´–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–æ–Ω–Ω–∏–∫¬ª (–ø–æ–∏—Å–∫ –ø–æ data/dreams_curated.json) === -->
<script>
let DREAMS_DATA=[];

function renderDreambookCount(){
  const L=(typeof I18N!=="undefined" ? (I18N[document.documentElement.lang]||I18N.ru) : I18N.ru);
  const counter=document.getElementById('dreamCount');
  if(!DREAMS_DATA.length){ counter.textContent=L.dbNoData; return; }
  counter.textContent=L.dbFound.replace("{n}", DREAMS_DATA.length);
}

(async function(){
  const DATA_URL = location.pathname.includes('/lunar-landing')
    ? '/lunar-landing/data/dreams_curated.json'
    : 'data/dreams_curated.json';

  const L=(typeof I18N!=="undefined" ? (I18N[document.documentElement.lang]||I18N.ru) : I18N.ru);

  try {
    const res = await fetch(DATA_URL, {cache:'no-store'});
    if (!res.ok) throw new Error('HTTP '+res.status);
    DREAMS_DATA = await res.json();
  } catch(e) {
    console.error('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–æ–Ω–Ω–∏–∫:', e);
    document.getElementById('dreamCount').textContent = L.dbNoData;
    return;
  }

  const dbTbody = document.querySelector('#dreamTable tbody');
  const counter = document.getElementById('dreamCount');
  const search = document.getElementById('dreamSearch');

  function render(rows){
    dbTbody.innerHTML = '';
    rows.slice(0,500).forEach(r => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td style="padding:10px; border-bottom:1px solid #222; font-weight:600">${(r.symbol||'').toString()}</td>
        <td style="padding:10px; border-bottom:1px solid #222">${((r.modern_interpretation||'')+'').slice(0,220)}‚Ä¶</td>
        <td style="padding:10px; border-bottom:1px solid #222">${(r.confidence??'').toString()}</td>`;
      dbTbody.appendChild(tr);
    });
    counter.textContent = L.dbFound.replace("{n}", rows.length);
  }

  function filter(q){
    q = q.trim().toLowerCase();
    if (!q) return DREAMS_DATA;
    return DREAMS_DATA.filter(r =>
      (r.symbol||'').toLowerCase().includes(q) ||
      (r.contexts||[]).some(c => (c||'').toLowerCase().includes(q))
    );
  }

  // –ø–µ—Ä–≤–∏—á–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä + –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–∏—Å–∫–∞
  render(DREAMS_DATA);
  search.placeholder = L.dbSearchPlaceholder;
  search.addEventListener('input', (e)=> render(filter(e.target.value)));
})();
</script>

</body>
</html>
